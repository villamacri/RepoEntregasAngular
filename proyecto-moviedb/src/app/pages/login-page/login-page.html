<!-- Plantilla basada en Bootstrap Sign-in example -->
<!-- https://getbootstrap.com/docs/5.3/examples/sign-in/ -->

<div class="d-flex align-items-center py-4 bg-body-tertiary min-vh-100">
  <main class="form-signin w-100 m-auto">
    
    <div class="text-center mb-4">
      <h1 class="h3 mb-3 fw-normal">游꿟 Movie Database</h1>
      <p class="text-muted">Gestiona tus pel칤culas favoritas</p>
    </div>

    <!-- Si NO est치 autenticado -->
    @if (!isAuthenticated()) {
      
      <div class="card shadow-sm">
        <div class="card-body p-4">
          
          <div class="alert alert-info" role="alert">
            Para gestionar tus listas necesitas iniciar sesi칩n con tu cuenta de TMDb.
          </div>

          <div class="d-grid">
            <button 
              class="btn btn-primary btn-lg" 
              type="button"
              (click)="login()" 
              [disabled]="isLoading"
            >
              @if (isLoading) {
                <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
                <span>Cargando...</span>
              } @else {
                <span>Iniciar Sesi칩n con TMDb</span>
              }
            </button>
          </div>

          @if (errorMessage) {
            <div class="alert alert-danger mt-3 mb-0" role="alert">
              {{ errorMessage }}
            </div>
          }

          <p class="mt-3 mb-0 text-muted text-center">
            <small>Ser치s redirigido a TMDb para autorizar de forma segura</small>
          </p>

        </div>
      </div>

    } @else {
      
      <!-- Si YA est치 autenticado -->
      <div class="card shadow-sm">
        <div class="card-body p-4">
          
          <div class="alert alert-success" role="alert">
            <strong>춰Bienvenido!</strong> Has iniciado sesi칩n correctamente.
          </div>

          <div class="d-grid gap-2">
            <button 
              class="btn btn-primary btn-lg" 
              type="button"
              [routerLink]="['/my-lists']"
            >
              Ver mis listas
            </button>
            
            <button 
              class="btn btn-outline-secondary" 
              type="button"
              (click)="logout()"
            >
              Cerrar Sesi칩n
            </button>
          </div>

        </div>
      </div>

    }

    <p class="mt-4 text-muted text-center">
      <small>Powered by <a href="https://www.themoviedb.org/" target="_blank">The Movie Database</a></small>
    </p>

  </main>
</div>
